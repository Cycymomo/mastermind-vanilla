/*! mastermind-vanilla v0.0.1 | Cyril Moreau - @cycymomo | MIT License | http://nickdouille.github.io/mastermind-vanilla/dist/ */

!function(e){"use strict";if(!e.document)throw"The game must be launched in the browser (DOM API required)";var t,n,o,l,i,r,c,s,a,u,d,f,m,p,h,g,y,C,E,b,v,B,I,_;B=10,I=4,_=["#f00","#0f0","#00f","#ff0","#fff","#bbb","#f80","#f0f"],p=[],h=e.localStorage&&e.localStorage.str_gridCouleursTentees?JSON.parse(e.localStorage.str_gridCouleursTentees):[],g=[],C=e.document.getElementById("couleursATrouver"),E=e.document.getElementById("couleursTentees"),b=e.document.getElementById("couleursAChoisir"),v=e.document.getElementById("palette"),o=function(t,n,o){e.alert(t+" / "+n+" / "+o)},l=function(e,t,n){var l,i,r;l=e.name||"[Erreur inconnue]",i=e.message||e,r=e.detail||"["+n+"] "+t,o(l,i,r)},i=function w(){var e=Math.floor(Math.random()*_.length);return-1===p.indexOf(e)?e:w()},r=function(){C.style.display=C.style.display&&"none"!==C.style.display?"none":"block"},c=function(t){var n,o;if(!(t.target instanceof e.HTMLSpanElement))throw"[fn_openPalette] Cette fonction ne peut pas être appelée ici";if(n=+t.target.id.split("_")[1],o=e.document.getElementById("couleursAChoisir_"+n),!o)throw"[fn_openPalette] Impossible de sélectionner cette case";v.style.display="block",y=n},s=function(){v.style.display="none",y=null},a=function(){var t,n=e.document.getElementById("couleursAChoisir_"+y);if(!(this instanceof e.HTMLSpanElement))throw"[fn_selectColor] Cette fonction ne peut pas être appelée ici";if(!n)throw"[fn_selectColor] Choisir d'abord une case";if(t=+this.id.split("_")[1],!_[t])throw"[fn_selectColor] Cette couleur n'existe pas";if(-1!==g.indexOf(t)&&g[y]!==t)throw"[fn_selectColor] Impossible de sélectionner deux couleurs identiques";g[y]=t,n.style.backgroundColor=_[t],s(),g.join("").length===I&&(e.document.getElementById("validChoice").style.visibility="visible")},d=function(){g=[];for(var t=0;I>t;t++)e.document.getElementById("couleursAChoisir_"+t).style.backgroundColor="#fff"},u=function(){var t,o,l,i,r=h.length;for(h.push(g.slice()),e.document.getElementById("validChoice").style.visibility="hidden",i=e.document.createElement("div"),i.id=r,t=0,o=g.length;o>t;t++)n(i,r+"."+t,_[g[t]]);l=e.document.createElement("span"),l.id=r+".nbBlanc",l.className="rowResultBlanc",i.appendChild(l),l=e.document.createElement("span"),l.id=r+".nbRouge",l.className="rowResultRouge",i.appendChild(l),E.appendChild(i),f(r),d()},f=function(t){var n=g.join(""),o=p.join(""),l=e.document.getElementById(t+".nbBlanc"),i=e.document.getElementById(t+".nbRouge"),r=0,c=0;if(!l||!i)throw"Impossible d'afficher le résultat";n===o?m(!0,t+1):t+1===B?m():(g.forEach(function(e,t){e===p[t]?c++:-1!==p.indexOf(e)&&r++}),l.innerHTML=r,i.innerHTML=c)},m=function(t,n){e.alert(t?"Gagné en "+n+" coups !":"Perdu"),e.location.reload()},n=function(t,n,o,l){var i=e.document.createElement("span");i.id=n,i.style.backgroundColor=o,l&&(i.onclick=l),t.appendChild(i)},t=function(){var t,o,l,r,s,u;for(t=0;t<_.length;t++)n(v,"palette_"+t,_[t],a);for(t=0;I>t;t++)r=i(),p.push(r),n(C,"couleursATrouver_"+t,_[r]),n(b,"couleursAChoisir_"+t,"#fff",c);for(t=0,l=h.length;l>t;t++){for(u=e.document.createElement("div"),u.id=t,o=0;I>o;o++)n(u,t+"."+o,h[t][o]);s=e.document.createElement("span"),s.id=t+".nbBlanc",s.className="rowResultBlanc",u.appendChild(s),s=e.document.createElement("span"),s.id=t+".nbRouge",s.className="rowResultRouge",u.appendChild(s),E.appendChild(u)}},t(),e.document.getElementById("toggleSolution").onclick=r,e.document.getElementById("validChoice").onclick=u,e.onerror=l}(this);
//# sourceMappingURL=app.0.0.1.min.js.map
